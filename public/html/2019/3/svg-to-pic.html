<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>前端截图下载图片</title>
  <style>
  </style>
</head>
<body>
<div id="cmBox" class="c-m-box">
    <img id="img" alt="长天" class="c-m-img" crossorigin="anonymous">
</div>
<button id="btn">下载</button>
<script>
  var img = document.getElementById('img')
  // 图片地址显示为DOM转换的svg,只支持行内样式
  var svg = '<svg version="1.1" class="highcharts-root" style="font-family:Microsoft YaHei;font-size:12px;color:#999;fill:#999;" xmlns="http://www.w3.org/2000/svg" width="944" height="400" viewBox="0 0 944 400"><desc>Created with Highcharts 6.2.0</desc><defs><clipPath id="highcharts-ncda6b5-1"><rect x="0" y="0" width="794" height="341" fill="none"></rect></clipPath></defs><rect fill="transparent" class="highcharts-background" x="0" y="0" width="944" height="400" rx="0" ry="0"></rect><rect fill="none" class="highcharts-plot-background" x="100" y="20" width="794" height="341"></rect><g class="highcharts-pane-group" data-z-index="0"></g><g class="highcharts-plot-bands-0" data-z-index="0"><path fill="rgba(51,51,51,.1)" class="highcharts-plot-band " d="M 108.5 20 L 108.5 361 182.5 361 182.5 20 z" visibility="visible"></path><path fill="rgba(51,51,51,.1)" class="highcharts-plot-band " d="M 256.5 20 L 256.5 361 330.5 361 330.5 20 z" visibility="visible"></path><path fill="rgba(51,51,51,.1)" class="highcharts-plot-band " d="M 404.5 20 L 404.5 361 478.5 361 478.5 20 z" visibility="visible"></path><path fill="rgba(51,51,51,.1)" class="highcharts-plot-band " d="M 551.5 20 L 551.5 361 625.5 361 625.5 20 z" visibility="visible"></path><path fill="rgba(51,51,51,.1)" class="highcharts-plot-band " d="M 699.5 20 L 699.5 361 773.5 361 773.5 20 z" visibility="visible"></path><path fill="rgba(51,51,51,.1)" class="highcharts-plot-band " d="M 847.5 20 L 847.5 361 884.5 361 884.5 20 z" visibility="visible"></path></g><g class="highcharts-grid highcharts-xaxis-grid " data-z-index="1"><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 108.5 20 L 108.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 182.5 20 L 182.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 256.5 20 L 256.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 330.5 20 L 330.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 404.5 20 L 404.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 478.5 20 L 478.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 551.5 20 L 551.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 625.5 20 L 625.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 699.5 20 L 699.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 773.5 20 L 773.5 361" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 847.5 20 L 847.5 361" opacity="1"></path></g><g class="highcharts-grid highcharts-yaxis-grid " data-z-index="1"><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 361.5 L 894 361.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 318.5 L 894 318.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 276.5 L 894 276.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 233.5 L 894 233.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 191.5 L 894 191.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 148.5 L 894 148.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 105.5 L 894 105.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 63.5 L 894 63.5" opacity="1"></path><path fill="none" stroke="#252525" stroke-width="1" stroke-dasharray="3,1" data-z-index="1" class="highcharts-grid-line" d="M 100 19.5 L 894 19.5" opacity="1"></path></g><rect fill="none" class="highcharts-plot-border" data-z-index="1" x="100" y="20" width="794" height="341"></rect><g class="highcharts-axis highcharts-xaxis " data-z-index="2"><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 108.5 361 L 108.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 182.5 361 L 182.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 256.5 361 L 256.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 330.5 361 L 330.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 404.5 361 L 404.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 478.5 361 L 478.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 551.5 361 L 551.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 625.5 361 L 625.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 699.5 361 L 699.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 773.5 361 L 773.5 371" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 847.5 361 L 847.5 371" opacity="1"></path><path fill="none" class="highcharts-axis-line" stroke="#252525" stroke-width="1" data-z-index="7" d="M 100 361.5 L 894 361.5"></path></g><g class="highcharts-axis highcharts-yaxis " data-z-index="2"><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 361.5 L 90 361.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 318.5 L 90 318.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 276.5 L 90 276.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 233.5 L 90 233.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 191.5 L 90 191.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 148.5 L 90 148.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 105.5 L 90 105.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 63.5 L 90 63.5" opacity="1"></path><path fill="none" class="highcharts-tick" stroke="#252525" stroke-width="1" d="M 100 19.5 L 90 19.5" opacity="1"></path><text x="55.734375" data-z-index="7" text-anchor="middle" transform="translate(0,0) rotate(270 55.734375 190.5)" class="highcharts-axis-title" style="color:#999;font-family:Microsoft YaHei;font-size:12px;fill:#999;" y="190.5"><tspan>月收益(%)</tspan></text><path fill="none" class="highcharts-axis-line" stroke="#252525" stroke-width="1" data-z-index="7" d="M 99.5 20 L 99.5 361"></path></g><g class="highcharts-series-group" data-z-index="3"><g data-z-index="0.1" class="highcharts-series highcharts-series-0 highcharts-column-series highcharts-tracker " transform="translate(100,20) scale(1 1)" clip-path="url(#highcharts-ncda6b5-1)"><rect x="5" y="214" width="9" height="6" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-0 "></rect><rect x="23" y="164" width="9" height="50" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-1 "></rect><rect x="42" y="209" width="9" height="5" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-2 "></rect><rect x="60" y="172" width="9" height="42" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-3 "></rect><rect x="79" y="214" width="9" height="84" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-4 "></rect><rect x="97" y="211" width="9" height="3" fill="#ff4455" class="highcharts-point highcharts-color-5"></rect><rect x="116" y="196" width="9" height="18" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-6 "></rect><rect x="134" y="214" width="9" height="6" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-7"></rect><rect x="153" y="214" width="9" height="5" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-8 "></rect><rect x="171" y="195" width="9" height="19" fill="#ff4455" class="highcharts-point highcharts-color-9"></rect><rect x="189" y="214" width="9" height="16" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-10"></rect><rect x="208" y="168" width="9" height="46" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-11 "></rect><rect x="226" y="213" width="9" height="1" fill="#009819" class="highcharts-point highcharts-color-12"></rect><rect x="245" y="194" width="9" height="20" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-13 "></rect><rect x="263" y="201" width="9" height="13" fill="#ff4455" class="highcharts-point highcharts-color-0"></rect><rect x="282" y="214" width="9" height="13" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-1 "></rect><rect x="300" y="212" width="9" height="2" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-2 "></rect><rect x="319" y="214" width="9" height="6" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-3"></rect><rect x="337" y="214" width="9" height="7" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-4"></rect><rect x="356" y="214" width="9" height="2" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-5 "></rect><rect x="374" y="209" width="9" height="5" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-6 "></rect><rect x="393" y="183" width="9" height="31" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-7 "></rect><rect x="411" y="50" width="9" height="164" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-8 "></rect><rect x="429" y="214" width="9" height="38" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-9 "></rect><rect x="448" y="205" width="9" height="9" fill="#ff4455" class="highcharts-point highcharts-color-10 "></rect><rect x="466" y="214" width="9" height="37" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-11 "></rect><rect x="485" y="214" width="9" height="12" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-12 "></rect><rect x="503" y="214" width="9" height="6" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-13 "></rect><rect x="522" y="143" width="9" height="71" fill="#ff4455" class="highcharts-point highcharts-color-0 "></rect><rect x="540" y="214" width="9" height="37" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-1 "></rect><rect x="559" y="214" width="9" height="13" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-2 "></rect><rect x="577" y="214" width="9" height="25" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-3 "></rect><rect x="596" y="202" width="9" height="12" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-4 "></rect><rect x="614" y="214" width="9" height="19" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-5 "></rect><rect x="633" y="214" width="9" height="12" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-6 "></rect><rect x="651" y="214" width="9" height="1" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-7 "></rect><rect x="670" y="214" width="9" height="3" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-8 "></rect><rect x="688" y="214" width="9" height="9" fill="#009819" class="highcharts-point highcharts-negative highcharts-color-9 "></rect><rect x="706" y="198" width="9" height="16" fill="#ff4455" class="highcharts-point highcharts-color-10 "></rect><rect x="725" y="214" width="9" height="9" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-11 "></rect><rect x="743" y="214" width="9" height="3" fill="rgb(0,152,25)" class="highcharts-point highcharts-negative highcharts-color-12 "></rect><rect x="762" y="95" width="9" height="119" fill="rgb(255,68,85)" class="highcharts-point highcharts-color-13 "></rect></g><g data-z-index="0.1" class="highcharts-markers highcharts-series-0 highcharts-column-series " transform="translate(100,20) scale(1 1)" clip-path="none"></g></g><text x="472" text-anchor="middle" class="highcharts-title" data-z-index="4" style="color:#eee;font-size:12px;font-family:Microsoft YaHei;fill:#eee;" y="19"></text><text x="472" text-anchor="middle" class="highcharts-subtitle" data-z-index="4" style="color:#666666;fill:#666666;" y="24"></text><g class="highcharts-axis-labels highcharts-xaxis-labels " data-z-index="7"><text x="109.23255813953" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2015-09</text><text x="183.09302325581" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2016-01</text><text x="256.95348837209" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2016-05</text><text x="330.81395348837" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2016-09</text><text x="404.67441860465" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2017-01</text><text x="478.53488372093" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2017-05</text><text x="552.39534883721" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2017-09</text><text x="626.25581395349" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2018-01</text><text x="700.11627906977" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2018-05</text><text x="773.97674418605" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2018-09</text><text x="847.83720930233" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="middle" transform="translate(0,0)" y="381" opacity="1">2019-01</text></g><g class="highcharts-axis-labels highcharts-yaxis-labels " data-z-index="7"><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="365" opacity="1">-30</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="322" opacity="1">-20</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="280" opacity="1">-10</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="237" opacity="1">0</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="195" opacity="1">10</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="152" opacity="1">20</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="109" opacity="1">30</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="67" opacity="1">40</text><text x="85" style="color:#999;cursor:default;font-size:12px;font-family:Microsoft YaHei;fill:#999;" text-anchor="end" transform="translate(0,0)" y="24" opacity="1">50</text></g><g class="highcharts-label highcharts-tooltip highcharts-color-13" style="pointer-events:none;white-space:nowrap;" data-z-index="8" transform="translate(716,-9999)" opacity="0" visibility="visible"><path fill="none" class="highcharts-label-box highcharts-tooltip-box highcharts-shadow" d="M 3.5 0.5 L 223.5 0.5 C 226.5 0.5 226.5 0.5 226.5 3.5 L 226.5 61.5 C 226.5 64.5 226.5 64.5 223.5 64.5 L 155.5 64.5 149.5 70.5 143.5 64.5 3.5 64.5 C 0.5 64.5 0.5 64.5 0.5 61.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="#000000" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"></path><path fill="none" class="highcharts-label-box highcharts-tooltip-box highcharts-shadow" d="M 3.5 0.5 L 223.5 0.5 C 226.5 0.5 226.5 0.5 226.5 3.5 L 226.5 61.5 C 226.5 64.5 226.5 64.5 223.5 64.5 L 155.5 64.5 149.5 70.5 143.5 64.5 3.5 64.5 C 0.5 64.5 0.5 64.5 0.5 61.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="#000000" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"></path><path fill="none" class="highcharts-label-box highcharts-tooltip-box highcharts-shadow" d="M 3.5 0.5 L 223.5 0.5 C 226.5 0.5 226.5 0.5 226.5 3.5 L 226.5 61.5 C 226.5 64.5 226.5 64.5 223.5 64.5 L 155.5 64.5 149.5 70.5 143.5 64.5 3.5 64.5 C 0.5 64.5 0.5 64.5 0.5 61.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="#000000" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"></path><path fill="rgba(0,0,0,.75)" class="highcharts-label-box highcharts-tooltip-box" d="M 3.5 0.5 L 223.5 0.5 C 226.5 0.5 226.5 0.5 226.5 3.5 L 226.5 61.5 C 226.5 64.5 226.5 64.5 223.5 64.5 L 155.5 64.5 149.5 70.5 143.5 64.5 3.5 64.5 C 0.5 64.5 0.5 64.5 0.5 61.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="#555" stroke-width="1"></path></g></svg>'
  var src = 'data:image/svg+xml;charset=utf-8,'+ encodeURIComponent(svg);
  img.src = src
  var png = new Image()
  png.crossOrigin = 'anonymous'//IE11有效？
  png.src = src
  // 触发点击
  var btn = document.getElementById('btn')

  btn.onclick=function () {
    var canvas = document.createElement('canvas')
    var context = canvas.getContext('2d')
    var width = png.width, height = png.height;
    // canvas绘制
    canvas.width = width;
    canvas.height = height;
    // 画布清除
    context.clearRect(0, 0, width, height);
    // 绘制图片到canvas
    context.drawImage(png, 0, 0);
    //IE10存在跨域安全问题,导致画布污染toDataURL报错
    //https://www.zhangxinxu.com/wordpress/2018/02/crossorigin-canvas-getimagedata-cors/
    var url = canvas.toDataURL('image/png')
    // 如果浏览器支持msSaveOrOpenBlob方法（也就是使用IE浏览器的时候），那么调用该方法去下载图片
    if (window.navigator.msSaveOrOpenBlob) {
      // 这里是获取到的图片base64编码,这里只是个例子哈，要自行编码图片替换这里才能测试看到效果
      var bstr = window.atob(url.split(',')[1])
      var n = bstr.length
      var u8arr = new Uint8Array(n)
      while (n--) {
        u8arr[n] = bstr.charCodeAt(n)
      }
      var blob = new Blob([u8arr])
      window.navigator.msSaveOrOpenBlob(blob, 'chart-download' + '.' + 'png')
    } else {
      // 创建隐藏的可下载链接
      var eleLink = document.createElement('a');
      eleLink.target = '_blank'
      // 下载图片文件名就按照时间戳来
      eleLink.download = 'zxx_png-' + (+new Date() + '').slice(1, 9) + '.png';
      eleLink.style.display = 'none';

      // 触发图片onload是个异步过程，因此，需要在回调中处理
      eleLink.href = url;
      // 触发点击
      document.body.appendChild(eleLink);
      eleLink.click();
      // 然后移除
      document.body.removeChild(eleLink);
    }
  }
</script>
</body>
</html>